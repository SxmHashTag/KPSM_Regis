{% extends 'base.html' %}

{% block title %}{% if case %}Edit Case{% else %}New Case{% endif %} - Diamond Forensics{% endblock %}

{% block content %}
<div class="w-full space-y-6">
    <!-- Breadcrumbs -->
    {% include 'components/breadcrumbs.html' %}
    
    <div>
        <h2 class="text-3xl font-bold text-foreground">{% if case %}Edit Case{% else %}New Case{% endif %}</h2>
        <p class="text-muted-foreground mt-1">{% if case %}Update case information{% else %}Create a new forensic investigation case{% endif %}</p>
    </div>

    <div class="bg-gradient-to-br from-indigo-50 to-blue-50 rounded-lg border-2 border-indigo-200 p-6 shadow-md">
        <form method="post" class="space-y-6">
            {% csrf_token %}
            
            <div>
                <label for="case_number" class="block text-sm font-medium text-foreground mb-2">Case Number{% if not case %} (Optional){% endif %}</label>
                <input type="text" id="case_number" name="case_number" value="{{ case.case_number|default:'' }}"
                    class="w-full px-3 py-2 border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"
                    placeholder="{% if case %}{{ case.case_number }}{% else %}Leave empty to auto-generate (e.g., 25-0001){% endif %}">
                <p class="text-xs text-muted-foreground mt-1">{% if case %}Update the case number if needed.{% else %}Format: YY-NNNN. Leave blank to auto-generate based on current year.{% endif %}</p>
            </div>
            
            <div>
                <label for="case_name" class="block text-sm font-medium text-foreground mb-2">Case Name *</label>
                <input type="text" id="case_name" name="case_name" required value="{{ case.case_name|default:'' }}"
                    class="w-full px-3 py-2 border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"
                    placeholder="Enter case name">
            </div>
            
            <div>
                <label for="description" class="block text-sm font-medium text-foreground mb-2">Description</label>
                <textarea id="description" name="description" rows="4"
                    class="w-full px-3 py-2 border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"
                    placeholder="Enter case description">{{ case.description|default:'' }}</textarea>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="status" class="block text-sm font-medium text-foreground mb-2">Status *</label>
                    <select id="status" name="status" required
                        class="w-full px-3 py-2 border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring">
                        <option value="active" {% if case.status == 'active' %}selected{% endif %}>Active</option>
                        <option value="closed" {% if case.status == 'closed' %}selected{% endif %}>Closed</option>
                        <option value="suspended" {% if case.status == 'suspended' %}selected{% endif %}>Suspended</option>
                        <option value="archived" {% if case.status == 'archived' %}selected{% endif %}>Archived</option>
                    </select>
                </div>
                
                <div>
                    <label for="priority" class="block text-sm font-medium text-foreground mb-2">Priority *</label>
                    <select id="priority" name="priority" required
                        class="w-full px-3 py-2 border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring">
                        <option value="low" {% if case.priority == 'low' %}selected{% endif %}>Low</option>
                        <option value="medium" {% if case.priority == 'medium' %}selected{% endif %}>Medium</option>
                        <option value="high" {% if case.priority == 'high' %}selected{% endif %}>High</option>
                        <option value="critical" {% if case.priority == 'critical' %}selected{% endif %}>Critical</option>
                    </select>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="case_type" class="block text-sm font-medium text-foreground mb-2">Case Type</label>
                    <input type="text" id="case_type" name="case_type" value="{{ case.case_type|default:'' }}"
                        class="w-full px-3 py-2 border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"
                        placeholder="E.g. Fraud, Cybercrime, Theft, etc. (optional)">
                </div>
                
                <div>
                    <label for="department" class="block text-sm font-medium text-foreground mb-2">Department</label>
                    <select id="department" name="department"
                        class="w-full px-3 py-2 border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring">
                        <option value="">-- Select Department --</option>
                        <option value="sur" {% if case.department == 'sur' %}selected{% endif %}>SUR</option>
                        <option value="ar" {% if case.department == 'ar' %}selected{% endif %}>AR</option>
                        <option value="jzz" {% if case.department == 'jzz' %}selected{% endif %}>JZZ</option>
                        <option value="zwacri" {% if case.department == 'zwacri' %}selected{% endif %}>ZwaCri</option>
                        <option value="fraude" {% if case.department == 'fraude' %}selected{% endif %}>Fraude</option>
                        <option value="umm" {% if case.department == 'umm' %}selected{% endif %}>UMM</option>
                        <option value="alpha" {% if case.department == 'alpha' %}selected{% endif %}>Alpha</option>
                        <option value="douane" {% if case.department == 'douane' %}selected{% endif %}>Douane</option>
                        <option value="ind" {% if case.department == 'ind' %}selected{% endif %}>IND</option>
                        <option value="verkeer" {% if case.department == 'verkeer' %}selected{% endif %}>Verkeer</option>
                        <option value="kustwacht" {% if case.department == 'kustwacht' %}selected{% endif %}>Kustwacht</option>
                        <option value="pelican" {% if case.department == 'pelican' %}selected{% endif %}>Pelican</option>
                        <option value="other" {% if case.department == 'other' %}selected{% endif %}>Other</option>
                    </select>
                </div>
            </div>
            
            <div>
                <label for="prosecutor" class="block text-sm font-medium text-foreground mb-2">Prosecutor</label>
                <input type="text" id="prosecutor" name="prosecutor" value="{{ case.prosecutor|default:'' }}" list="prosecutor-list"
                    class="w-full px-3 py-2 border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"
                    placeholder="Select or type prosecutor name">
                <datalist id="prosecutor-list">
                    {% for prosecutor in prosecutors %}
                    <option value="{{ prosecutor }}">
                    {% endfor %}
                </datalist>
                <p class="text-xs text-muted-foreground mt-1">Select from list or type a new name</p>
            </div>
            
            <div class="flex gap-4 pt-4">
                <button type="submit" 
                    class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium shadow-md">
                    {% if case %}Update Case{% else %}Create Case{% endif %}
                </button>
                <button type="button" onclick="window.history.back();"
                    class="px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium shadow-md">
                    Cancel
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
